# 21. 빌트인 객체

## 1. 자바스크립트 객체의 분류

- 1. 표준 빌트인 객체 (Native objects or Built-in objects or Global Objects)

  - ECMAScript 사양에 정의된 객체
  - 애플리케이션 전역의 공통 기능을 제공
  - 자바스크립트 실행 환경(브라우저 또는 Node.js 환경과 관계없이 언제나 사용)
  - 전역 객체의 프로퍼티로서 제공 => 별도의 선언 없이 전액 변수처럼 언제나 참조

- 2. 호스트 객체

  - ECMAScript 사양에 정의되어 있지는 않음
  - 자바스크립트 실행 환경(브라우저 또는 Node.js 환경)에서 추가로 제공하는 객체
  - 브라우저 환경: DOM, BOM, Canvas, XMLHttpRequest, fetch, requestAnimationFrame, SVG, Web Storage, Web Component, Web Worker와 같은 클라이언트 사이트 Web API를 호스트 객체로 제공
  - Node.js 환경에서는 Node.js 고유의 API를 호스트 객체로 제공

  ```js
  // Node.js 호스트 객체 예시
  // 파일 시스템 모듈 불러오기
  const fs = require("fs");

  // 파일 읽기
  fs.readFile("myFile.txt", "utf8", function (err, data) {
    if (err) throw err;
    console.log(data);
  });

  // 디렉토리 생성하기
  fs.mkdir("myDirectory", function (err) {
    if (err) throw err;
    console.log("디렉토리가 생성되었습니다.");
  });
  ```

- 3. 사용자 정의 객체

  - 빌트인 객체와 호스트 객체처럼 **기본으로 제공되는 객체가 아닌 사용자가 직접 정의한 객체**

## 2. 표준 빌트인 객체

- 1. 대부분의 빌트인 객체는 모두 인스턴스를 성생할 수 있는 생성자 함수 객체다 (ex. Object, String, Number, Boolean, Array ...)

  - 생섬자 함수 객체인 빌트인 객체는 **프로토타입 메서드와 정적 메서드를 제공**
  - 생성자 함수인 빌트인 객체가 생성한 인스턴스의 프로토타입은 / 빌트인 객체의 prototype 프로퍼티에 바인딩된 객체다.
  - 빌트인 객체의 prototype 프로퍼티에 바인딩 된 객체(예를 들어, Array.prototype)는 다양한 기능의 빌트인 프로토타입 메서드를 제공한다.

    ```js
    // Array 생성자 함수에 의한 Array 객체 생성
    const arr = new Array(1, 2, 3);

    console.log(typeof arr); // object
    console.log(Object.getPrototypeOf(arr) === Array.prototype); // true
    arr.map((num) => console.log(num));
    ```

  - 빌트인 객체는 또한 **인스턴스 없이도 호출 가능한 빌트인 정적 메서드를 제공**한다.

    ```js
    // Number 생성자 함수에 의한 Number 객체 생성
    const numObj = new Number(1.5); // Number {1.5}

    // toFixed는 Number.prototype 의 프로토타입 메서드다.
    // 이 프로토타입 메서드는 모든 Number 인스턴스가 상속을 통해 사용할 수 있다.
    // Number.prototype.toFixed 는 소수점 자리를 반올림 하여 문자열로 반환한다.
    console.log(numObj.toFixed()); // 2

    // IsInteger는 Number의 정적 메서드다.
    // IsInteger는 인스턴스 없이도 호출 가능하다.
    // Number.IsInteger 는 인수가 정수(integer)인지 검사하여 그 결과를 Boolean으로 반환한다.
    console.log(Number.isInteger(0.5)); // false
    ```

- 2. 생성자 함수가 아닌 객체인 빌트인 객체 (ex. Math, Reflect, JSON ...)

  - 정적 메서드만 제공
    (사진)

## 3. 원시값과 래퍼 객체

- 궁금증? : 문자열이나 숫자, 불리언 등의 원시값이 있는데도 **문자열, 숫자, 불리언 객체를 생성하는 String, Number, Boolean 등의 표준 빌트인 생성자 함수가 존재하는 이유**는 무엇일까?
- 궁금증2? : 원시값은 객체가 아니므로 프로퍼티나 메서드를 가질 수 없는 데도 원시값인 문자열이 마치 객체처럼 동작하는데 어떻게 가능한 것일까?

  ```js
  const str = "hello";

  // 원시 타입인 문자열이 프로퍼티와 메서드를 갖고 있는 객체처럼 동작한다.
  console.log(str.length); // 5
  console.log(str.toUpperCase()); // HELLO
  ```

- 궁금증2 답변:

  - 원시값인 문자열, 숫자, 불리언의 값의 경우 이들 원시값에 대해 마치 객체처럼 마침표 표기법(또는 대괄호 표기법)으로 접근하면 **자바스크립트 엔진이 일시적으로 <span color:"red">원시값을 연관된 객체</span>로 변환해 주기 때문이다.**-
  - 즉, 원시값을 객체처럼 사용하면 1. 자바스크립트 엔진은 암묵적으로 연관된 객체를 생성하여 2. 생성된 객체로 프로퍼티에 접근하거나 메서드를 호출하고 3. 다시 원시값으로 되돌린다.
  - 🔥 **문자열, 숫자, 불리언 값에 대해 객체처럼 접근하면 생성되는 임시 객체를 래퍼 객체(wrapper object)라 한다.** 🔥
  - 문자열에 대해 마침표 표기법으로 접근하면 그 순간 래퍼 객체인 String 생성자 함수 / 의 인스턴스가 생성되고 / 문자열은 래퍼 객체의 `[[StringData]]` 내부 슬롯에 할당된다.

  ```js
  const str = "hi";

  // 원시 타입인 문자열이 래퍼 객체인 String 인스턴스로 변환된다.
  // 문자열 래퍼 객체인 String 생성자 함수의 인스턴스(이 코드에서는 'str')는 String.prototype 의 메서드를 상속받아 사용할 수 있다.
  console.log(str.length); // 5
  console.log(str.toUpperCase()); // HI

  // 래퍼 객체로 프로퍼티에 접근하거나 메서드를 호출한 후, 다시 원시값으로 되돌린다.
  console.log(typeof str); // string
  ```

  - 그 후, 래퍼 객체의 처리가 종료되면 래퍼 객체의 `[[StringData]]` 내부 슬롯에 할당된 원시값으로 원래의 상태, 즉 식별자가 원시값을 갖도록 되돌리고 -> 래퍼 객체는 가비지 컬렉션의 대상이 된다.

  - 다시 정리해보면!!

  ```js
  // 1. 식별자 str은 문자열을 값으로 가지고 있다.
  const str = "hello";

  // 2. 식별자 str은 암묵적으로 생성된 래퍼 객체를 가리킨다.
  // 식별자 str의 값 "hello"는 래퍼 객체의 [[StringData]] 내부 슬롯에 할당된다.
  // 래퍼 객체에 name 프로퍼티가 동적 추가된다.
  str.name = "Lee";

  // 3. 식별자 str은 다시 원래의 문자열, 즉 래퍼 객체의 [[StringData]] 내부 슬롯에 할당된 원시값을 갖는다.
  // 이 때, 2에서 생성된 래퍼 객체는 아무도 참조하지 않는 상태이므로 가비지 컬렉션의 대상이 된다.

  // 4. 식별자 str은 새롭게 암묵적으로 생성된(2에서 생성된 래퍼 객체와는 다른) 래퍼 객체를 가리킨다.
  // 새롭게 생성된 래퍼 객체에는 name 프로퍼티가 존재하지 않는다.
  console.log(str.name); // undefined

  // 5. 식별자 str은 다시 원래의 문자열, 즉 래퍼 객체의 [[StringData]] 내부 슬롯에 할당된 원시값을 갖는다.
  // 이 때 4에서 생성된 래퍼 객체는 아무도 참조하지 않는 상태이므로 가비지 컬렉션의 대상이 된다.
  console.log(typeof str, str); // string hello
  ```
